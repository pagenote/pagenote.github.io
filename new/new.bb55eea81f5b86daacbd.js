(self.webpackChunkpagenote_cn=self.webpackChunkpagenote_cn||[]).push([[337],{9648:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(3804),o=n.n(r);const a=EditorJS;var c=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const l=function(){function e(t){var n=t.data,r=(t.config,t.api,t.readOnly);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=n,this.readOnly=r}var t,n,r;return t=e,r=[{key:"isReadOnlySupported",get:function(){return!0}}],(n=[{key:"render",value:function(){var e=document.createElement("h4");return e.classList="light-head",e.style.borderColor=this.data.color,e.innerHTML=this.data.text,e.contentEditable=!1,e}},{key:"save",value:function(){return{light:this.data.light}}}])&&i(t.prototype,n),r&&i(t,r),e}();var u=n(4919),s=n.n(u),f=n(2964),p=n.n(f),d=n(8092),h=n.n(d),m=n(6689),y=n.n(m),b=n(3058),g=n.n(b),v=n(3602),w=n.n(v),E=n(5547),x=n.n(E),O=n(7732),k=n.n(O);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,e);var t,n,r,a,i=(r=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(a){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function u(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.editor?t.editor&&t.editor.blocks.render({blocks:e}).then((function(){document.querySelector(".codex-editor__redactor").style.paddingBottom="30px"})):console.log("not ready")},(r="renderBlocks")in(n=R(t=i.call(this,e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this,t={header:{class:s(),inlineToolbar:!0},list:{class:p(),inlineToolbar:!0},image:{class:h(),inlineToolbar:!0},delimiter:{class:y(),inlineToolbar:!0},quote:{class:g(),inlineToolbar:!0},warning:w(),marker:{class:x(),shortcut:"CMD+SHIFT+M"},table:{class:k()},lightheader:{class:l}};this.props.tools&&Object.keys(t).forEach((function(n){e.props.tools.includes(n)||delete t[n]}));var n=Object.assign({time:(new Date).getTime(),blocks:[],version:""},this.props.data||{}),r=new(c())({holder:"pagenote-editor",readOnly:this.props.readonly,tools:t,data:n,onReady:function(){e.editor=r},onChange:function(t){e.editor.save().then((function(t){"function"==typeof e.props.onSave&&e.props.onSave(t)}))}})}},{key:"render",value:function(){return o().createElement("div",{className:"editor"},o().createElement("div",{id:"pagenote-editor"}))}}])&&j(t.prototype,n),u}(r.Component)},5186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(3804),o=n.n(r),a=n(7196),c=n.n(a),i=n(9669),l=n.n(i);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y="https://cors-anywhere.herokuapp.com/",b=("https://github.com/login/oauth/authorize?scope=user%20public_repo&client_id=c4aae381097464aa1024&redirect_uri=".concat("https://pagenote.logike.cn"),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,n,r,a,c=(r=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(a){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),m(d(t=c.call(this,e)),"codeToToken",(function(){var e=window.location.search.match(/code=(.*)$/);e&&l()({method:"post",headers:{Accept:"application/json"},url:"".concat(y,"https://github.com/login/oauth/access_token"),data:{client_id:"c4aae381097464aa1024",client_secret:"ed40211bca3ccabd900586079b89fd0ec1ea48be",code:e[1]}}).then((function(e){var t=e.data.access_token;localStorage.setItem("token",t);var n=new URLSearchParams(location.search).get("comeback");window.location=n||"/"}))})),m(d(t),"checkLogin",(function(){var e=localStorage.getItem("token");e&&l()({method:"get",headers:{Accept:"application/json",Authorization:"token ".concat(e)},url:"".concat(y,"https://api.github.com/user")}).then((function(e){e.data&&t.setState({userInfo:e.data})})).catch((function(e){console.error(e)}))})),t.state={userInfo:{}},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.codeToToken(),this.checkLogin()}},{key:"render",value:function(){var e=this.state.userInfo;return o().createElement("nav",null,o().createElement("style",{jsx:"true"},"\n                nav{\n                    // height: 40px;\n                    // line-height: 40px;\n                    font-size:14px;\n                    border-bottom: 1px solid rgba(30,35,42,.06);\n                    box-shadow: 0 1px 3px 0 rgba(0,34,77,.05);\n                }\n                nav a{\n                    color: #0366d6;\n                    text-decoration: none;\n                    margin-right: 12px;\n                }\n                .header{\n                    display: flex;\n                    padding: 0 24px;\n                    padding: 10px 24px;\n                    margin: 0 auto;\n                    max-width: 1000px;\n                    justify-content: space-between;\n                    box-sizing: border-box;\n                }\n                .me-link{\n                    margin-right: 12px;\n                }\n                .user-avatar{\n                    width: 20px;\n                    height: 20px;\n                    border-radius: 10px;\n                    border-radius: 4px;\n                    overflow: hidden;\n                }\n                #login{\n                    padding: 0px 6px;\n                    background: #509ff5;\n                    border-radius: 6px;\n                    color: #fff;\n                }\n            "),o().createElement("section",{className:"header"},o().createElement("div",null,o().createElement("a",{href:"/"},"PAGENOTE 一页一记")),o().createElement("div",null,o().createElement("span",{className:"me-link"},e.name?o().createElement("a",{className:"user-avatar",href:"/me/"},o().createElement("img",{width:20,height:20,src:"".concat(e.avatar_url,"&s=30"),alt:"".concat(e.name)})):o().createElement("a",{id:"login",href:"/me/"},"我的")),o().createElement("a",{href:"/setting/"},"设置"))))}}])&&s(t.prototype,n),i}(r.Component));function g(){return o().createElement("footer",null,o().createElement("style",{jsx:"true"},"\n                footer{\n                  // display:flex;\n                  // justify-content: space-around;\n                  max-width: 800px;\n                  margin:24px auto;\n                  \n                  font-size:12px;\n                }\n                \n                  .footer-links a{\n                    margin-right:12px;\n                    transition: color .2s;\n                    color: #586069;\n                    text-decoration: none;\n                    line-height: 1.4em;\n                  }\n                  .footer-links a:hover{\n                    text-decoration: underline;\n                    color: #0366d6;\n                  }\n                  \n                  .d-flex {display: flex!important;}\n                  .list-style-none {list-style: none!important;}\n                  .footer-links{\n                    justify-content: space-between;\n                    width: 100%;\n                    margin: 0;\n                    padding: 18px 0 12px 0;\n                    border-top: 1px solid #ececec;\n                  }\n              "),o().createElement("footer",null,o().createElement("div",{className:"position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light "},o().createElement("ul",{className:"list-style-none d-flex footer-links"},o().createElement("li",{className:"mr-3 mr-lg-0"},"© 2020 ",o().createElement("a",{href:"/"},"PAGENOTE")),o().createElement("li",{className:"mr-3 mr-lg-0"},o().createElement("p",null,o().createElement("a",{href:"/hello.html"},"产品介绍")),o().createElement("p",null,o().createElement("a",{href:"/page/?id=why"},"常见问题")),o().createElement("p",null,o().createElement("a",{href:"/release/"},"更新日志"))),o().createElement("li",{className:"mr-3 mr-lg-0"},o().createElement("p",null,o().createElement("a",{href:"/page/?id=privacy"},"隐私协议"))),o().createElement("li",null,o().createElement("p",null,o().createElement("a",{href:"/page/?id=donation"},"支持/贡献"))),o().createElement("li",null,o().createElement("p",null,o().createElement("a",{href:"/page/?id=developer"},"开发者")),o().createElement("p",null,"用户群：769094377"))))))}function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=document.getElementById("app");c().render(o().createElement(o().Fragment,null,t&&o().createElement(b,null),o().createElement(e,null),n&&o().createElement(g,null)),r)}if(window.location.protocol.indexOf("https")>-1){var w=function(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],w("js",new Date),w("config","G-LBE869KVBS"),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(e){console.log("Service Worker 注册成功!")})).catch((function(e){console.log(e)}))}},5760:(e,t,n)=>{"use strict";var r=n(3804),o=n.n(r),a=n(9648),c=n(5186);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,n,r,c,i=(r=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(c){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function m(){var e;l(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(p(e=i.call.apply(i,[this].concat(n))),"saveData",(function(e){localStorage.setItem("new_page",JSON.stringify(e))})),e}return t=m,(n=[{key:"render",value:function(){var e=null;try{e=JSON.parse(localStorage.getItem("new_page"))}catch(e){}return o().createElement("div",{className:"page","data-pagenote":"new"},o().createElement("div",{className:"editor_container"},o().createElement(a.Z,{data:e,onSave:this.saveData})))}}])&&u(t.prototype,n),m}(r.Component);(0,c.Z)(m)},3804:e=>{"use strict";e.exports=React},7196:e=>{"use strict";e.exports=ReactDOM}},0,[[5760,666,216]]]);