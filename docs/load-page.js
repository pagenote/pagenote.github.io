var pagenote=new PageNote({barInfo:{right:40,top:200,status:"fold"}});const gh=new GitHub;var id=window.location.search.match(/pagenote=(.*)$/),pagenoteId=id?id[1]:"",sessionKey="pagenote"+pagenoteId;loadPageNote(pagenoteId,!1);var proxy="https://cors-anywhere.herokuapp.com/",times=0;function loadPageNote(e,t){times>4||axios({method:"get",headers:{Accept:"application/json"},url:(t?proxy:"")+"https://api.github.com/repos/rowthan/pagenote/issues/"+e}).then((function(e){e.data&&injectHtml(JSON.parse(e.data.body))})).catch((function(n){try{switch(n.response.status){case 404:setError("加载失败，未知快照ID");break;default:setError("加载失败，稍后刷新页面试试？"),getCache()}}catch(n){setError("加载失败，稍后刷新页面试试？")}loadPageNote(e,!t)})).finally((function(){times++}))}function getCache(){var e=sessionStorage.getItem(sessionKey);if(e)try{injectHtml(JSON.parse(e))}catch(e){}}function injectHtml(e){document.getElementById("pagenote-share-content-container").innerHTML=e.html,pagenote.init(e),noteUser(e),document.title=e.title,sessionStorage.setItem(sessionKey,JSON.stringify(e))}function setError(e){document.getElementById("pagenote-share-content-container").innerHTML='<p style="text-align: center">'+e||"加载失败</p>"}function noteUser(e){[{x:window.innerWidth-320,y:20,text:"pagenote提示说明",tip:'<div>当前快照网页使用<a href="https://logike.cn/pagenote">pagenote</a>生成。内容公开可见，请注意个人信息保护。</div><span>与原网页<span id="origin-url">'+e.url+'</span>的作者无关，不对其内容负责。本页面谨用于分享查看，不代表原网页的的即时页面。创建时间 <time id="create-time">'+new Date(e.lastModified).toLocaleDateString()+"</time>",time:(new Date).getTime(),id:"body",isActive:!0,bg:"#fbbc04",locked:!0}].forEach((function(e){pagenote.record(e,!0)})),setTimeout((()=>{pagenote.replay(0)}),2e3)}